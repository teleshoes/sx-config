#!/usr/bin/perl
use strict;
use warnings;

my $ipmagicName = "sx";

my @cmds = (
  "mcetool --reset-settings",
  "mcetool --set-dim-timeout=600",
  "mcetool --set-als-autobrightness=disabled",
  "mcetool --set-display-off-single-powerkey-press-actions=unblank,tkunlock",
  "mcetool --set-ps-mode=disabled",
);
my $cmd = "set -x; " . join(" && ", @cmds);

sub main(@){
  system "ipmagic", $ipmagicName, "-u", "root", $cmd;
  if($? != 0){
    die "\n\nERROR: mcetool commands returned non-zero exit code\n";
  }
}

&main(@ARGV);
